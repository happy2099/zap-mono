
> zapbot@1.5.2 start:threaded
> node start.js --threading

[PERFORMANCE-MONITOR] ðŸš€ ULTRA-LOW LATENCY performance monitor initialized
[PERFORMANCE-MONITOR] ðŸ”„ Periodic saving started (every 60s)
ðŸš€ Starting ZapBot with Helius integration...
âš¡ ULTRA-LOW LATENCY optimizations enabled:
   - LaserStream: <100ms detection target
   - Sender: <200ms execution target
   - Overall: <300ms copy trade cycle target
ðŸ“Š Performance monitoring active
ðŸ“Š Initializing SQLite database...
[DB] Database connected successfully at /home/sunny/zap-mono-grk1522/database/zapbot.db 
[DB] Database tables created successfully 
[DB] DatabaseManager initialized successfully 
âœ… Database initialized successfully
ðŸ”´ Initializing Redis for flight data...
âœ… RedisManager initialized successfully
ðŸ”¥ Warming up Redis cache...
âœ… Cache warming completed
âœ… Redis initialized successfully
ðŸ§µ Threaded mode: Skipping legacy DataManager initialization
ðŸ”„ Checking for data migration...
âœ… Database already contains data, skipping migration.
ðŸ¤– Starting main ZapBot application...
ðŸ§µ Starting in THREADED mode...
ðŸ§µ ThreadedZapBot initialized with worker configuration
ðŸš€ Starting ThreadedZapBot initialization...
ðŸ”§ Initializing worker threads...
ðŸ”§ Created worker: telegram
ðŸ”§ Created worker: monitor
ðŸ”§ Created worker: executor
ðŸ”§ Created worker: data
ðŸ”§ Created worker: websocket
ðŸ”§ Created worker: analyzer
âœ… 6 workers initialized
ðŸ’“ Worker monitoring started (interval: 30000ms)
â³ Waiting for workers to be ready...
[data] Initializing worker...
[DB] Database connected successfully at /home/sunny/zap-mono-grk1522/database/zapbot.db 
[DB] Database tables created successfully 
âœ… Worker data is ready
[DB] DatabaseManager initialized successfully 
[2025-09-06T22:11:22.267Z] [data] [INFO] Database manager worker initialized successfully {}
[data] Worker initialized successfully
[analyzer] Initializing worker...
[executor] Initializing worker...
[DB] Database connected successfully at /home/sunny/zap-mono-grk1522/database/zapbot.db 
[DB] Database tables created successfully 
[websocket] Initializing worker...
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
[DB] DatabaseManager initialized successfully 
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
[telegram] Initializing worker...
[2025-09-06T22:11:26.037Z] [telegram] [INFO] âœ… This worker marked as active Telegram instance {}
[DB] Database connected successfully at /home/sunny/zap-mono-grk1522/database/zapbot.db 
[DB] Database tables created successfully 
[DB] DatabaseManager initialized successfully 
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
âœ… Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
âœ… Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
âœ… Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
âœ… Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
[WM Init] SolanaManager instance set.
[ApiManager] Initialized with Helius-native logic.
âœ… Worker websocket is ready
[ApiManager] Initialized with Helius-native logic.
âœ… Worker analyzer is ready
[WM Init] Initializing WalletManager in DATABASE-ONLY mode...
[WM Init] âœ… Successfully initialized in DATABASE-ONLY mode.
[TELEGRAM_UI] TelegramUI initialized. 
[TELEGRAM_UI] BOT_TOKEN: "Set"
ðŸ” DEBUG: BOT_TOKEN value: 8334266790...
ðŸ” DEBUG: BOT_TOKEN length: 46
âœ… DEBUG: Token validation passed, proceeding with bot initialization
âœ… DEBUG: Using polling mode with WSL stability fixes
[TELEGRAM_UI] TelegramBot instance created: "Success"
âœ… TelegramUI: Bot ready in polling mode with WSL stability
[2025-09-06T22:11:27.011Z] [telegram] [INFO] Telegram UI initialized successfully in polling mode {}
[telegram] Worker initialized successfully
âœ… Worker telegram is ready
[2025-09-06T22:11:27.008Z] [websocket] [INFO] WebSocket worker initialized successfully {}
[websocket] Worker initialized successfully
[2025-09-06T22:11:27.008Z] [analyzer] [INFO] Queue processing started { interval: 1000 }
[2025-09-06T22:11:27.008Z] [analyzer] [INFO] Transaction analyzer worker initialized successfully {}
[analyzer] Worker initialized successfully
[WM Init] SolanaManager instance set.
[TELEGRAM_UI] Telegram Bot authorized for: @Hydra_zapbot 
âœ… TelegramUI: Bot created in polling mode
[WM Init] Initializing WalletManager in DATABASE-ONLY mode...
[WM Init] âœ… Successfully initialized in DATABASE-ONLY mode.
[ApiManager] Initialized with Helius-native logic.
âœ… RedisManager initialized successfully
[PERFORMANCE-MONITOR] ðŸš€ ULTRA-LOW LATENCY performance monitor initialized
[monitor] Initializing worker...
[2025-09-06T22:11:29.477Z] [monitor] [INFO] Initializing ULTRA-LOW LATENCY Trader Monitor with LaserStream... {}
[DB] Database connected successfully at /home/sunny/zap-mono-grk1522/database/zapbot.db 
[DB] Database tables created successfully 
[DB] DatabaseManager initialized successfully 
[LASERSTREAM-ENHANCED] ðŸš€ Manager initialized with Singapore regional endpoints.
[2025-09-06T22:11:29.542Z] [monitor] [INFO] Starting ULTRA-LOW LATENCY LaserStream monitoring... {}
[2025-09-06T22:11:29.592Z] [monitor] [INFO] Initializing ULTRA-LOW LATENCY LaserStream to monitor 2 specific trader wallets. {}
[2025-09-06T22:11:29.594Z] [monitor] [INFO] âš¡ Target detection latency: <100ms {}
[2025-09-06T22:11:29.594Z] [monitor] [INFO] ðŸ”§ Using PROCESSED commitment for fastest possible detection {}
[2025-09-06T22:11:29.595Z] [monitor] [INFO] ðŸ“¡ Zstd compression enabled for optimal performance {}
[LASERSTREAM-ENHANCED] ðŸŽ¯ Subscribing to 2 master trader wallets...
[LASERSTREAM-ENHANCED] ðŸ“ Traders: suqh...HQfK, 4BdK...EFUk
[LASERSTREAM-ENHANCED] ðŸ”§ Using enhanced subscription with data slicing and Singapore endpoint
[LASERSTREAM-ENHANCED] âœ… Stream connected to Singapore endpoint. ID: a9e63a53-e09e-4357-95eb-4fe467c16df6
[2025-09-06T22:11:29.782Z] [monitor] [INFO] Starting direct RPC polling as backup... {}
[2025-09-06T22:11:29.784Z] [monitor] [INFO] ðŸš€ Starting dynamic direct RPC polling... {}
âœ… Worker monitor is ready
[2025-09-06T22:11:29.793Z] [monitor] [INFO] ðŸ“Š Monitoring 2 wallets via RPC polling {}
[2025-09-06T22:11:29.794Z] [monitor] [INFO] âœ… Dynamic direct RPC polling started successfully {}
[2025-09-06T22:11:29.794Z] [monitor] [INFO] Starting periodic subscription refresh... {}
[2025-09-06T22:11:29.795Z] [monitor] [INFO] âœ… Periodic refresh started (every 5 minutes) {}
[monitor] Worker initialized successfully
âœ… Worker executor is ready
[TradeNotificationManager] Initialized in Threaded Dispatch mode.
[PERFORMANCE-MONITOR] ðŸš€ ULTRA-LOW LATENCY performance monitor initialized
[SINGAPORE-SENDER] ðŸš€ ULTRA-FAST Manager initialized with Singapore regional endpoints
TradingEngine initialized with HYBRID (Polling + API) logic, Quantum Cache, and Singapore Sender integration (ENABLED).
[2025-09-06T22:11:31.772Z] [executor] [INFO] Trade executor worker initialized successfully {}
[executor] Worker initialized successfully
[FAILURE-CLEANUP] ðŸš€ Initialized with blockhash: 9gj33aks...
[2025-09-06T22:11:32.127Z] [monitor] [INFO] ðŸš€ New transaction detected for wallet suqh5sHt... | Sig: 4275PKFQ... {}
[2025-09-06T22:11:32.239Z] [monitor] [INFO] ðŸŽ¯ Transaction detected for suqh5sHt... | Sig: 4275PKFQ... | Forwarding to analyzer... {}
ðŸš€ FORWARDING COPY TRADE from monitor to executor:
   ðŸ“ Trader: cup (suqh...HQfK)
   ðŸ”‘ Signature: 4275PKFQ...
   ðŸ“Š Has pre-fetched data: true
âœ… Executor worker ready, forwarding message...
[2025-09-06T22:11:32.242Z] [executor] [INFO] ðŸš€ EXECUTING HIGH-SPEED COPY TRADE {
  traderWallet: 'suqh...HQfK',
  signature: '4275PKFQ...',
  hasPreFetchedData: true
}
[PROCESS_SIG] ðŸŽ¯ Processing signature for copy trade:
   ðŸ“ Source trader: cup (suqh...HQfK)
   ðŸ”‘ Signature: 4275...imsV
   ðŸ“Š Has pre-fetched data: true
   ðŸ“‹ Pre-fetched data: âœ… Present
[EXECUTE_MASTER] ðŸ” Starting analysis for transaction 4275...imsV...
[EXECUTE_MASTER] ðŸ“ Source trader: cup (suqh...HQfK)
[EXECUTE_MASTER] ðŸ“Š Pre-fetched data available: true
[EXECUTE_MASTER] ðŸ” Using deep analysis for complete trade details...
[ANALYZER-V5-HELIUS] Processing sig: 4275...imsV
[NOISE-FILTER] ðŸŽ¯ PURE COPY BOT: NO NOISE FILTERING - Copying everything!
[ANALYZER] Using full pre-fetched gRPC stream object...
[ANALYZER] âœ… Transaction metadata looks good
[BalanceAnalysis] Trader suqh...HQfK SOL change: -0.106474348 SOL (Raw: -106474348)
[BalanceAnalysis] SOL Change Threshold for swap detection: 0 lamports (NO RESTRICTIONS)
[BalanceAnalysis] âœ… BUY Detected (SOL out, Token in). SOL change: -106474348, Token received: H9mJ...pump
[ANALYZER] âœ… Trade detected! Analyzing platform...
[ANALYZER] ðŸ”¬ Performing deep analysis for platform detection...
[EVENT-ANALYSIS] ðŸ” Analyzing transaction events for platform detection...
[ROUTER-DETECTION] ðŸ” Searching for Router instruction...
[ROUTER-DETECTION] ðŸŽ¯ Found Custom Router instruction at index 3
[ROUTER-DETECTION] âœ… Router instruction confirmed with trader as signer
[EVENT-ANALYSIS] ðŸŽ¯ Router detected at instruction 3
[ANALYZER] ðŸŽ¯ Deep analysis found platform: Router (F5tf...zvBq)
[ANALYZER] âœ… Platform detected via deep analysis: Router
[ANALYZER] â­ï¸ Skipping traditional analysis - platform already identified
[ANALYZER] ðŸŽ‰ SUCCESS! BUY on Router | 0.1065 SOL â†’ H9mJ...pump | Fee: 0.001005 SOL | Slot: 365121711
[ANALYZER] ðŸŽ¯ Added Router cloning data to final details
[EXECUTE_MASTER] ðŸ“Š BUY on Router | 0.1065 SOL â†’ H9mJ...pump | Fee: 0.001005 SOL | Slot: 365121711
[EXECUTE_MASTER] âœ… Transaction is copyable! Platform: Router, Type: buy
[EXECUTE_MASTER] ðŸŽ¯ Using platform from analysis: Router
[EXECUTE_MASTER] ðŸ” Debug: Analyzer Platform: Router
[EXECUTE_MASTER] ðŸ” Debug: Detected Platform: Router
[EXECUTE_MASTER] ðŸ” Debug: Executor config: { builder: [AsyncFunction: buildRouterInstruction], units: 600000 }
[EXECUTE_MASTER] ðŸ” Debug: Builder function: [AsyncFunction: buildRouterInstruction]
[EXECUTE_MASTER] ðŸ” Loading traders from database...
[EXECUTE_MASTER] ðŸ“Š Found 1 users with traders
[EXECUTE_MASTER] âœ… Found active trader: cup for user 5665429224
[EXECUTE_MASTER] ðŸš€ Dispatching copy for Router trade to 1 user(s).
[EXECUTE_MASTER] ðŸ” AnalysisResult.details before Singapore sender: {
  tradeType: 'buy',
  inputMint: 'So11111111111111111111111111111111111111112',
  outputMint: 'H9mJ6CUU2x8CbE2qa5PcX7d67EbCfL5FnjcZvyWhpump',
  dexPlatform: 'Router',
  hasInputMint: true,
  hasOutputMint: true,
  inputMintType: 'string',
  outputMintType: 'string',
  hasCloningTarget: true
}
[SINGAPORE-SENDER] ðŸš€ Starting copy trade execution for user 5665429224
[SINGAPORE-SENDER] ðŸ”‘ Master signature: 4275PKFQh5ZsA6z9yPheRDqU3MEV87DrVKXxTcLseGB48Wv2LrhULowmzJtQQWvkw78iENP69xCzS9knDPefimsV
[SINGAPORE-SENDER] ðŸ“ Platform: Router
[SINGAPORE-SENDER] ðŸŽ¯ Token: H9mJ...pump
[DIAGNOSTIC] Attempting to get Keypair for wallet ID: 5
[DIAGNOSTIC] âœ… Decryption successful for "zap".
[DIAGNOSTIC] âœ… Keypair successfully derived for wallet ID: 5
[KeypairProvider] âœ… Resolved wallet "zap" for user 3.
[SINGAPORE-SENDER] ðŸ’¼ Using wallet: zap
[TRADE-VALIDATION] ðŸ” Validating trade for copy...
[TRADE-VALIDATION] âœ… Trade validation passed! Type: buy
[2025-09-06T22:11:32.650Z] [monitor] [INFO] ðŸš€ New transaction detected for wallet 4BdKaxN8... | Sig: 2vVXkABc... {}
âœ… All required workers are ready
âœ… ThreadedZapBot initialization completed successfully
ðŸŽ¯ Starting trader monitoring...
âœ… Trader monitoring started (auto-run via LaserStream in worker).
ðŸŽ‰ ThreadedZapBot started successfully with 6 workers
âœ… Threaded application started successfully
ðŸŽ‰ ZapBot startup completed successfully!
ðŸ¥ Health check server running on port 3001
[2025-09-06T22:11:32.709Z] [monitor] [INFO] ðŸŽ¯ Transaction detected for 4BdKaxN8... | Sig: 2vVXkABc... | Forwarding to analyzer... {}
ðŸš€ FORWARDING COPY TRADE from monitor to executor:
   ðŸ“ Trader: 4BdK...EFUk
   ðŸ”‘ Signature: 2vVXkABc...
   ðŸ“Š Has pre-fetched data: true
âœ… Executor worker ready, forwarding message...
