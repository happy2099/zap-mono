[PERFORMANCE-MONITOR] 🚀 ULTRA-LOW LATENCY performance monitor initialized
[LEADER_TRACKER_V2] 🎯 Initialized. Ready for proactive leader tracking.
[PERFORMANCE-MONITOR] 🔄 Periodic saving started (every 60s)
🚀 Starting ZapBot with Helius integration...
⚡ ULTRA-LOW LATENCY optimizations enabled:
   - LaserStream: <100ms detection target
   - Sender: <200ms execution target
   - Overall: <300ms copy trade cycle target
📊 Performance monitoring active
📊 Initializing JSON data manager...
[JSON-DB] DataManager initialized successfully 
✅ Data manager initialized successfully
🔴 Initializing Redis for flight data...
✅ RedisManager initialized successfully
🔥 Warming up Redis cache...
✅ Cache warming completed
✅ Redis initialized successfully
🧵 Threaded mode: Using JSON DataManager
🔄 Checking for data migration...
✅ Found 1 existing users in JSON files, no migration needed.
🎯 Initializing proactive leader tracking...
[LEADER_TRACKER_V2] ✅ Activating proactive monitoring...
[LEADER_TRACKER_V2]  fetching leader schedule for 5000 slots starting from 369194384...
[LEADER_TRACKER_V2] ✅ Leader schedule cache refreshed. Now tracking 5000 upcoming slots.
[LEADER_TRACKER_V2] 🛰️ Subscribed to real-time slot updates. (Sub ID: 0)
✅ Proactive leader tracking has been activated.
🤖 Starting main ZapBot application...
🧵 Starting in THREADED mode...
🧵 ThreadedZapBot initialized with worker configuration
🚀 Starting ThreadedZapBot initialization...
🔧 Initializing worker threads...
🔧 Created worker: telegram
🔧 Created worker: monitor
🔧 Created worker: executor
🔧 Created worker: data
✅ 4 workers initialized
💓 Worker monitoring started (interval: 30000ms)
🎯 Initializing proactive leader tracking...
[LEADER_TRACKER_V2] Monitoring is already active.
✅ Proactive leader tracking has been activated.
⏳ Waiting for workers to be ready...
[data] Initializing worker...
[JSON-DB] DataManager initialized successfully 
✅ Worker data is ready
[2025-09-25T15:25:58.313Z] [data] [INFO] Database manager worker initialized successfully {}
[data] Worker initialized successfully
[LEADER_TRACKER_V2] 🎯 Initialized. Ready for proactive leader tracking.
[executor] Initializing worker...
[JSON-DB] DataManager initialized successfully 
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
✅ Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
[WM Init] SolanaManager instance set.
[telegram] Initializing worker...
[2025-09-25T15:25:59.494Z] [telegram] [INFO] ✅ This worker marked as active Telegram instance {}
[JSON-DB] DataManager initialized successfully 
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
✅ Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
[monitor] Initializing worker...
[2025-09-25T15:26:00.047Z] [monitor] [INFO] Initializing Trader Monitor for Helius LaserStream (gRPC)... {}
[JSON-DB] DataManager initialized successfully 
[WM Init] Initializing WalletManager in DATABASE-ONLY mode...
[WM Init] ✅ Successfully initialized in DATABASE-ONLY mode.
[ApiManager] Initialized with Helius-native logic.
[2025-09-25T15:26:00.066Z] [monitor] [INFO] ✅ DataManager initialized. {}
✅ RedisManager initialized successfully
[2025-09-25T15:26:00.122Z] [monitor] [INFO] ✅ RedisManager initialized. {}
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
✅ Worker executor is ready
✅ RedisManager initialized successfully
[TradeNotificationManager] Initialized in Threaded Dispatch mode.
[LEADER_TRACKER_V2] 🎯 Initialized. Ready for proactive leader tracking.
[UNIVERSAL-ANALYZER] 🚀 Initialized with 22 known DEX/Router Program IDs.
[UNIVERSAL-ANALYZER] 🔧 DeBridge parser initialized WITHOUT IDLs (IDL compatibility issues):
   - Pump.fun transactions: ✅ (Fallback parsing without IDL)
   - Router transactions: ✅ (Graceful fallback)
   - Private routers: ✅ (Robust handling)
   - Standard Programs: ✅ (DeBridge built-in support)
   - Instruction data: ✅ (Proper serialization with 25-byte buffer)
   - Note: IDL parsing disabled due to format compatibility issues
[TRADING-ENGINE] 🚀 Universal Analyzer initialized for instant copy trading
TradingEngine initialized with HYBRID (Polling + API) logic, Quantum Cache, and Direct Solana Sender integration (ENABLED).
[2025-09-25T15:26:00.388Z] [executor] [INFO] Trade executor worker initialized successfully {}
[executor] Worker initialized successfully
✅ RedisManager initialized successfully
✅ Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
[WM Init] SolanaManager instance set.
[WM Init] Initializing WalletManager in DATABASE-ONLY mode...
[WM Init] ✅ Successfully initialized in DATABASE-ONLY mode.
[TELEGRAM_UI] TelegramUI initialized. 
[TELEGRAM_UI] BOT_TOKEN: "Set"
🔍 DEBUG: BOT_TOKEN value: 8246245975...
🔍 DEBUG: BOT_TOKEN length: 46
✅ DEBUG: Token validation passed, proceeding with bot initialization
✅ DEBUG: Using polling mode with WSL stability fixes
[TELEGRAM_UI] TelegramBot instance created: "Success"
✅ TelegramUI: Bot ready in polling mode with WSL stability
[2025-09-25T15:26:00.476Z] [telegram] [INFO] Telegram UI initialized successfully in polling mode {}
[2025-09-25T15:26:00.476Z] [telegram] [INFO] 🔄 Syncing all active traders to Redis on startup... {}
[RedisManager] ✅ Set 5 active traders for user 6032767351: H, alo, cupsey-2, Yenni, Kev
📨 Message from telegram: REFRESH_SUBSCRIPTIONS {
  type: 'REFRESH_SUBSCRIPTIONS',
  workerName: 'telegram',
  timestamp: 1758813960505,
  chatId: 'all'
}
✅ Worker telegram is ready
[2025-09-25T15:26:00.504Z] [telegram] [INFO] Synced 5 active traders for user 6032767351 {
  chatId: '6032767351',
  activeTraders: [ 'H', 'alo', 'cupsey-2', 'Yenni', 'Kev' ]
}
[2025-09-25T15:26:00.505Z] [telegram] [INFO] ✅ Startup sync completed: 5 total active traders synced to Redis {}
[telegram] Worker initialized successfully
[FAILURE-CLEANUP] 🚀 Initialized with blockhash: 8TNFhx2y...
[2025-09-25T15:26:00.641Z] [monitor] [INFO] ✅ SolanaManager initialized. {}
[2025-09-25T15:26:00.646Z] [monitor] [INFO] ✅ Golden Filter pre-loaded with 22 static DEX IDs. {}
[GOLDEN_FILTER] 📋 Sample DEX IDs loaded: 675k...1Mp8, LanM...J3uj, CPMM...KP1C, CAMM...rWqK, 6EF8...wF6P
[2025-09-25T15:26:00.649Z] [monitor] [INFO] [Monitor] No router database found, starting empty. {}
[2025-09-25T15:26:00.650Z] [monitor] [INFO] [Monitor] 🧠 Loading active traders from REDIS as Single Source of Truth... {}
[2025-09-25T15:26:00.653Z] [monitor] [INFO] [Monitor] Found 5 active traders for user 6032767351: Yenni, cupsey-2, H, alo, Kev {}
[2025-09-25T15:26:00.655Z] [monitor] [INFO] [Monitor] Loaded 18 total traders from DB for user 1758133086172 {}
[2025-09-25T15:26:00.655Z] [monitor] [INFO] [Monitor] ✅ Added trader Yenni with wallet 5B52w1ZW9tuwUduueP5J7HXz5AcGfruGoX6YoAudvyxG {}
[2025-09-25T15:26:00.656Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: Yenni (5B52w1ZW9tuwUduueP5J7HXz5AcGfruGoX6YoAudvyxG) {}
[2025-09-25T15:26:00.657Z] [monitor] [INFO] [Monitor] ✅ Added trader cupsey-2 with wallet 2fg5QD1eD7rzNNCsvnhmXFm5hqNgwTTG8p7kQ6f3rx6f {}
[2025-09-25T15:26:00.657Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: cupsey-2 (2fg5QD1eD7rzNNCsvnhmXFm5hqNgwTTG8p7kQ6f3rx6f) {}
[2025-09-25T15:26:00.658Z] [monitor] [INFO] [Monitor] ✅ Added trader H with wallet Av3xWHJ5EsoLZag6pr7LKbrGgLRTaykXomDD5kBhL9YQ {}
[2025-09-25T15:26:00.658Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: H (Av3xWHJ5EsoLZag6pr7LKbrGgLRTaykXomDD5kBhL9YQ) {}
[2025-09-25T15:26:00.658Z] [monitor] [INFO] [Monitor] ✅ Added trader alo with wallet xXpRSpAe1ajq4tJP78tS3X1AqNwJVQ4Vvb1Swg4hHQh {}
[2025-09-25T15:26:00.660Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: alo (xXpRSpAe1ajq4tJP78tS3X1AqNwJVQ4Vvb1Swg4hHQh) {}
[2025-09-25T15:26:00.660Z] [monitor] [INFO] [Monitor] ✅ Added trader Kev with wallet BTf4A2exGK9BCVDNzy65b9dUzXgMqB4weVkvTMFQsadd {}
[2025-09-25T15:26:00.662Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: Kev (BTf4A2exGK9BCVDNzy65b9dUzXgMqB4weVkvTMFQsadd) {}
[2025-09-25T15:26:00.663Z] [monitor] [INFO] [Monitor] ✅ Loaded 5 unique active trader wallets from Redis. {}
[2025-09-25T15:26:00.663Z] [monitor] [INFO] [Monitor] ⚡ Pre-synced 5 trader names to Redis for instant lookup. {}
[LASERSTREAM-PROFESSIONAL] 🚀 Manager initialized with LaserStream gRPC (Professional Plan).
[LASERSTREAM-PROFESSIONAL] 🌏 Primary Endpoint (Singapore): https://laserstream-mainnet-sgp.helius-rpc.com
[LASERSTREAM-PROFESSIONAL] 🌏 Fallback Endpoint (EWR): https://laserstream-mainnet-ewr.helius-rpc.com
[LASERSTREAM-PRO] ✅ Bot config set: Scale Factor: 0.1, Min Amount: 0.1 SOL
[2025-09-25T15:26:00.667Z] [monitor] [INFO] ✅ Bot configuration loaded: Scale Factor: 0.1, Min Amount: 0.1 SOL {}
RPCLoadBalancer initialized with 1 endpoints.
SolanaManager created. RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
✅ Connection established with RPC: https://mainnet.helius-rpc.com/?api-key=b9a69ad0-d823-429e-8c18-7cbea0e31769
[UNIVERSAL-ANALYZER] 🚀 Initialized with 22 known DEX/Router Program IDs.
[UNIVERSAL-ANALYZER] 🔧 DeBridge parser initialized WITHOUT IDLs (IDL compatibility issues):
   - Pump.fun transactions: ✅ (Fallback parsing without IDL)
   - Router transactions: ✅ (Graceful fallback)
   - Private routers: ✅ (Robust handling)
   - Standard Programs: ✅ (DeBridge built-in support)
   - Instruction data: ✅ (Proper serialization with 25-byte buffer)
   - Note: IDL parsing disabled due to format compatibility issues
[2025-09-25T15:26:00.992Z] [monitor] [INFO] ✅ Initialized LaserStreamManager, Universal Analyzer, and Cloning Logger. Ready to start monitoring. {}
[2025-09-25T15:26:00.993Z] [monitor] [INFO] [Monitor] 🧠 Loading active traders from REDIS as Single Source of Truth... {}
[2025-09-25T15:26:00.996Z] [monitor] [INFO] [Monitor] Found 5 active traders for user 6032767351: Yenni, cupsey-2, H, alo, Kev {}
[2025-09-25T15:26:00.998Z] [monitor] [INFO] [Monitor] Loaded 18 total traders from DB for user 1758133086172 {}
[2025-09-25T15:26:00.998Z] [monitor] [INFO] [Monitor] ✅ Added trader Yenni with wallet 5B52w1ZW9tuwUduueP5J7HXz5AcGfruGoX6YoAudvyxG {}
[2025-09-25T15:26:00.999Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: Yenni (5B52w1ZW9tuwUduueP5J7HXz5AcGfruGoX6YoAudvyxG) {}
[2025-09-25T15:26:01.000Z] [monitor] [INFO] [Monitor] ✅ Added trader cupsey-2 with wallet 2fg5QD1eD7rzNNCsvnhmXFm5hqNgwTTG8p7kQ6f3rx6f {}
[2025-09-25T15:26:01.000Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: cupsey-2 (2fg5QD1eD7rzNNCsvnhmXFm5hqNgwTTG8p7kQ6f3rx6f) {}
[2025-09-25T15:26:01.000Z] [monitor] [INFO] [Monitor] ✅ Added trader H with wallet Av3xWHJ5EsoLZag6pr7LKbrGgLRTaykXomDD5kBhL9YQ {}
[2025-09-25T15:26:01.002Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: H (Av3xWHJ5EsoLZag6pr7LKbrGgLRTaykXomDD5kBhL9YQ) {}
[2025-09-25T15:26:01.002Z] [monitor] [INFO] [Monitor] ✅ Added trader alo with wallet xXpRSpAe1ajq4tJP78tS3X1AqNwJVQ4Vvb1Swg4hHQh {}
[2025-09-25T15:26:01.003Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: alo (xXpRSpAe1ajq4tJP78tS3X1AqNwJVQ4Vvb1Swg4hHQh) {}
[2025-09-25T15:26:01.003Z] [monitor] [INFO] [Monitor] ✅ Added trader Kev with wallet BTf4A2exGK9BCVDNzy65b9dUzXgMqB4weVkvTMFQsadd {}
[2025-09-25T15:26:01.003Z] [monitor] [INFO] [REDIS-SYNC] ⚡ Synced trader name to Redis: Kev (BTf4A2exGK9BCVDNzy65b9dUzXgMqB4weVkvTMFQsadd) {}
[2025-09-25T15:26:01.003Z] [monitor] [INFO] [Monitor] ✅ Loaded 5 unique active trader wallets from Redis. {}
[2025-09-25T15:26:01.003Z] [monitor] [INFO] [Monitor] ⚡ Pre-synced 5 trader names to Redis for instant lookup. {}
[2025-09-25T15:26:01.004Z] [monitor] [INFO] 📡 Starting LaserStream gRPC subscription for 5 active trader wallets... {}
[LASERSTREAM-PROFESSIONAL] 🚀 Manager initialized with LaserStream gRPC (Professional Plan).
[LASERSTREAM-PROFESSIONAL] 🌏 Primary Endpoint (Singapore): https://laserstream-mainnet-sgp.helius-rpc.com
[LASERSTREAM-PROFESSIONAL] 🌏 Fallback Endpoint (EWR): https://laserstream-mainnet-ewr.helius-rpc.com
[LASERSTREAM-PRO] 🎯 Subscribing to 5 active trader wallets...
[LASERSTREAM-PRO] 🔍 Wallets to monitor: 5B52...vyxG, 2fg5...rx6f, Av3x...L9YQ, xXpR...hHQh, BTf4...sadd
[LASERSTREAM-PRO] 🔍 Full wallet addresses: ["5B52w1ZW9tuwUduueP5J7HXz5AcGfruGoX6YoAudvyxG","2fg5QD1eD7rzNNCsvnhmXFm5hqNgwTTG8p7kQ6f3rx6f","Av3xWHJ5EsoLZag6pr7LKbrGgLRTaykXomDD5kBhL9YQ","xXpRSpAe1ajq4tJP78tS3X1AqNwJVQ4Vvb1Swg4hHQh","BTf4A2exGK9BCVDNzy65b9dUzXgMqB4weVkvTMFQsadd"]
[LASERSTREAM-PRO] Subscribing to transactions from 5 trader wallets.
[LASERSTREAM-PRO] ✅ Using transaction subscription filtering. Connecting...
[LASERSTREAM-PRO] ✅ LaserStream connected using WORKING approach. ID: 2d3f37e4-68b9-4d6d-9d78-667b5f0a20c3. Monitoring...
✅ Worker monitor is ready
[LASERSTREAM-PRO] 🔧 Using proven live_debug.js method with 5 wallets
[2025-09-25T15:26:01.055Z] [monitor] [INFO] ✅ LaserStream monitoring started successfully {}
[2025-09-25T15:26:01.055Z] [monitor] [INFO] ✅ All systems are up and running. {}
[monitor] Worker initialized successfully
✅ All required workers are ready
✅ ThreadedZapBot initialization completed successfully
🎯 Starting trader monitoring...
✅ Trader monitoring started (auto-run via LaserStream in worker).
🎉 ThreadedZapBot started successfully with 4 workers
✅ Threaded application started successfully
🎉 ZapBot startup completed successfully!
🏥 Health check server running on port 3001
[TELEGRAM_UI] Telegram Bot authorized for: @zipponbot 
✅ TelegramUI: Bot created in polling mode
✅ Persistent menu button configured
💓 Health check: healthy { workers: 4, ready: 4 }
[monitor] Unknown message type: PING
[FAILURE-CLEANUP] 🔄 Blockhash changed, cleaning up old failed transactions
[LASERSTREAM-PRO] 💓 Heartbeat - Stream status: connected, Active wallets: 5

📡 Received SIGTERM, initiating graceful shutdown...
🛑 Starting graceful shutdown...
🔌 Closing health check server...

🛑 Received SIGTERM. Shutting down ThreadedZapBot...

🛑 Received SIGTERM, shutting down gracefully...
✅ Health check server closed
